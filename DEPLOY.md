# Как правильно публиковать бота на сервер (Railway и др.)

## Важно: не урезать проект

Бот должен деплоиться **целиком**. Если пушить только 1–2 файла, на сервере не окажется `handlers/base.py` и других модулей — тогда половина команд не будет работать (бот «игнорирует» /start, /help, /balance и т.д.).

## Правильная публикация через Git

**Пушить нужно весь проект**, а не только изменённые файлы:

```bash
# Добавить ВСЕ нужные для бота файлы (или весь репозиторий)
git add .

# Либо добавить только то, что менялось, но тогда на сервере уже должен быть полный код с прошлого деплоя
# git add main.py middlewares.py config.py handlers/ db.py ...

git commit -m "Fix main and middlewares"
git push
```

Если на Railway (или другом хостинге) сборка идёт из **того же репозитория**, то при каждом `git push` на сервер попадает **весь репозиторий**. Тогда важно:

1. **В репозитории должны быть все папки и файлы бота:**  
   `handlers/` (в т.ч. `base.py`, `economy.py`, `games.py`, …), `db.py`, `config.py`, `main.py`, `middlewares.py`, `utils.py`, `services/`, `games/`, и т.д.

2. **В `.dockerignore` (если есть) не исключать нужное.**  
   Не должно быть строк вроде:
   - `handlers/`
   - `*.py`
   - исключений, которые убирают папку `handlers` или основные модули.

3. **Проверка после деплоя:**  
   В логах на сервере не должно быть сообщения:  
   `Модуль handlers.base не найден`.  
   Если оно есть — на сервер не попал файл `handlers/base.py` (или он в другом месте). Нужно проверить, что в образ/артефакт сборки входит полный проект.

## Переменные окружения на сервере

- `BOT_TOKEN` — токен бота.
- Для **webhook** (режим на Railway):  
  `WEBHOOK_URL=https://твой-проект.up.railway.app/webhook`  
  (подставь свой URL от Railway).
- По желанию: `SLOT_FREE_GAME_DAILY_ENABLED=true` — разрешить одну бесплатную игру в слот при балансе 0 раз в день.

## Кратко

- **Не сокращать проект:** на сервере должен быть полный код, включая все `handlers/`.
- **Публиковать:** `git add .` (или все нужные файлы), `git commit`, `git push`.
- Убедиться, что в репозитории и в сборке нет исключений, которые убирают `handlers/` или ключевые файлы.
